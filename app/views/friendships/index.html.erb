<p id="notice"><%= notice %></p>

<h1>Friendships</h1>

<table class="table is-stripped">
  <thead>
    <tr>
      <th>User</th>
      <th>Confirmed</th>
      <th>Friend</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @friendships.each do |friendship| %>
      <tr>
        <td><%= friendship.user_id %></td>
        <td><%= friendship.confirmed %></td>
        <td><%= friendship.friend_id %></td>
        <td><%= link_to 'Show', friendship %></td>
        <td><%= link_to 'Edit', edit_friendship_path(friendship) %></td>
        <td><%= link_to 'Destroy', friendship, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<% User.all.each do |user|%>
<% unless current_user.is_friend?(user) %>
<div class="box">
  <div class="columns">
    <div class="column is-8">
      <%= user.name %>
    </div>
    <div class="column is-4">
      <%= form_for current_user.friendships.build(friend_id: user.id) do |f| %> 
          <%= f.text_field :user_id, value: current_user.id, type: :hidden %>
          <%= f.text_field :friend_id, value: user.id, type: :hidden %>
          <%= f.text_field :confirmed, value: false, type: :hidden %>
          <%= f.submit 'Confirm', class:"button is-info px-5"%>
        <% end%>
    </div>
  </div>
</div>
<% end %>
<% end %>

<br>

<%= link_to 'New Friendship', new_friendship_path %>
