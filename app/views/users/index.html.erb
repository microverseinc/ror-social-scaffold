<section class="users-section container">
  <ul class="users-list">
    <% @users.each do |user| %>
      <li class="card container shadow  p-2">
          <h5 class="card-title p-2"><%= user.name %></h5> <br>
        <span class="profile-link">
          <%= link_to 'See Profile',  user_path(user), class: "btn  btn-sm btn-secondary" %>
           <% if current_user.friend_invites(user) %>
            <button class="btn btn-sm btn-warning"> Pending Invitations </button>
          <% elsif current_user.receive_invitation(user)%>
            <%= link_to 'Accept', accept_invite_path(user_id: user.id), class: "btn btn-sm btn-primary" %>
            <%= link_to 'Decline', reject_invite_path(user_id: user.id), method: :delete, class: "btn btn-sm btn-danger" %>
          <% elsif !current_user.friend?(user) && current_user.id != user.id %>
            <%= link_to 'Invite to Friendship', send_invite_path(user_id: user.id) , class: "btn btn-sm btn-success" %>
            <% elsif current_user.friend?(user) %>
            <%= link_to 'Remove friend', remove_friend_path(user_id: user.id), method: :delete, data: {confirm: "Are you sure you want to remove friend?"}, class: "btn btn-sm btn-danger" %>
          <% end %>
        </span>
      </li>
    <% end %>
  </ul>

  <h3 class="container">Pending invitations</h3>
  <% @pending_invitations.uniq.each do |invitation| %>
  <ul>
  <li class="card container shadow  p-2">
  <h5 class="card-title"><%= invitation.name.capitalize%></h5>  
  </li>
  </ul>
  <% end %>
</section>